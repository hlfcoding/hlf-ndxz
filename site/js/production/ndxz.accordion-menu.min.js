/**
 * PJP Indexhibit Menu Navigation
 * @author      peng@pengxwang.com
 * @param       {jQuery object} set of matched elements
 * @version     1.0
 * @requires    jQuery 1.2+
 */

(function(c){c.fn.pjpNAccordion=function(a){a=c.extend(true,{selector:{classEnabled:"pjpna",classButton:"pjpnaButton",classExpanded:"pjpnaExpanded",classCollapsed:"pjpnaCollapsed",classDisabled:"pjpnaDisabled",header:"li.section-title",menu:"ul:not(ul ul)",item:"li",currentItem:"li.active"},element:{button:{wrapper:'<a href="#"></a>',expand:"+",collapse:"&ndash;",title:{more:"more work",less:"less work"}}},num:{show_base:2,show_custom:{}},autoCollapse:false},a);return new c.PJPNAccordion(a,c(this))};
c.PJPNAccordion=function(a,i){var h=i.find(a.selector.menu),l=h.find(a.selector.header),f=[],j=c(),m=function(d){var e=j.index(d.target),g=f[e].is(":hidden")?true:false;f[e].toggle();if(a.autoCollapse)for(var b=0;b<f.length;b++)if(b!=e){f[b].filter(":visible").hide();j.eq(b).html(a.element.button.expand).attr("title",a.element.button.title.more).trigger(c.Event("title_changed"))}h.eq(e).attr("class",g?a.selector.classExpanded:a.selector.classCollapsed);k(c(d.target),g)},k=function(d,e){d.html(e?a.element.button.collapse:
a.element.button.expand).attr("title",e?a.element.button.title.less:a.element.button.title.more).trigger(c.Event("title_changed"))};i.addClass(a.selector.classEnabled);h.each(function(d){var e=a.num.show_custom[(d+1).toString()]!=null?a.num.show_custom[(d+1).toString()]:a.num.show_base,g=c(a.element.button.wrapper).html(a.element.button.expand).attr({title:a.element.button.title.more,"class":a.selector.classButton}),b=c(this);b.hasCurrentItem=b.find(a.selector.currentItem).length;g=l.eq(d).append(g).find("."+
a.selector.classButton);f[d]=b.children("li:gt("+e+")");if(!a.autoCollapse||a.autoCollapse&&!b.hasCurrentItem){f[d].hide();f[d].length==0&&b.addClass(a.selector.classDisabled)}else b.hasCurrentItem&&k(g,true);b.addClass(a.selector.classCollapsed);g.filter(":not(."+a.selector.classDisabled+") ."+a.selector.classButton).click(m)});j=h.find("."+a.selector.classButton);return i}})(jQuery);

