#!/usr/bin/env bash

root_dir=$(pwd)
src_dir="$root_dir/src"
theme_dir="$root_dir/theme"
web_dir="$root_dir/web"

set -e

cd "$theme_dir"
ls -d ./*/
echo -e "\nTheme name?\n"
read -r name
theme_dir="$theme_dir/$name"

echo -e "\nInstalling theme '$name'...\n"

cd "$theme_dir"
cp -f 'src/ThemeServiceProvider.php' "$src_dir/Silexhibit/"
echo -e "\nInstalled theme PHP!"

rm -rf "$src_dir/mustache/theme/"*.mustache
cp -rf src/mustache/*.mustache "$src_dir/mustache/theme/"
echo -e "\nInstalled theme templates!"

rm -rf "$web_dir/theme/"*.{css,js}
for f in web/*.{css,js}; do
  if [ -f "$f" ]; then
    cp -f "$f" "$web_dir/theme/"
  fi
done
echo -e "\nInstalled theme assets!"

echo -e "\nInstalled theme '$name'!\n"

cd "$root_dir"
